<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>艾臣科技年会抽奖</title>
<link href="./css/ui-dialog.css" type="text/css" rel="stylesheet" media="screen, projection">
<style type="text/css">
* {margin: 0; padding: 0; box-sizing: border-box;}
html,body{background-color: #6d0303;}
ul,li{list-style: none;}
.l-draw-start .l-name-item:after{background-color: rgba(0,0,0,0.8)}
.l-text-center{text-align: center;}
.l-name-list{max-width: 100%; width: 1240px; margin:0 auto; padding: 20px; overflow: hidden;}
.l-name-item{float:left;width: 60px;height: 60px;border: 3px solid transparent; position: relative;}
.l-name-item:after{content: '';position: absolute;top:0;left: 0;right: 0;bottom: 0;transition: all 0.3s linear;}
.l-name-item img{width: 100%;height: 100%;}
.l-name-item.l-ignore img{filter:grayscale(100%);}
.l-name-item.l-ignore:after{content: '已中奖'; background-color: rgba(0,0,0, 0.6); color: #fff; line-height: 54px; text-align: center; font-size: 12px; font-weight: bold;}
.l-name-item.l-active,
.l-name-item.l-winner{transform: scale(1.2);border-color: rgba(24, 255, 0, 0.8) /*rgba(255, 136, 6, 0.8)*/; z-index: 1;} 
.l-name-item.l-active:after,
.l-name-item.l-winner:after{display: none;}
.l-draw-btn-box{margin: 20px auto;text-align: center;}
.l-btn{
  border:none; background-color: rgba(255, 136, 6, 0.8);
  padding: 15px 30px;color: #fff; font-size: 16px;font-weight: bold;border-radius: 3px;
}
</style>
</head>
<body>
  <div id="app" class="l-app">
    <ul id="l-name-list" class="l-name-list">
      <li id="l-name-{{item.id}}" class="l-name-item" v-for="item in nameList">
        <img :src="item.thumb">  
      </li>
    </ul>
    <div class="l-draw-btn-box">
      <button v-show="!isDraw" class="l-btn" @click="drawStart">开始抽奖</button>
      <button v-else class="l-btn" @click="drawStop">停止抽奖</button>
      <button class="l-btn">奖项设置</button>
      <button class="l-btn">中奖名单</button>
    </div>
  </div>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.28/vue.js"></script>
  <script type="text/javascript">
  $(function(){
    var startId = 0;
    var vm = new Vue({
      el: document.body,
      data: function(){
        return {
          winnerNum: 1,
          isDraw: false,
          nameList: []
        }
      },
      ready: function(){
        var nameList = [];
        for (var i = 200; i > 0; i--) {
          nameList.push({
            id: i,
            name: '赖国聪',
            department: '技术部',
            thumb: 'http://thecodeplayer.com/u/uifaces/'+ ((i-1)%50+1) +'.jpg',
            image: 'http://thecodeplayer.com/u/uifaces/'+ ((i-1)%50+1) +'.jpg',
            isWinner: false
          });
        }
        this.nameList = nameList;
      },
      methods: {
        drawStart: function(){
          if(this.isDraw) return;

          $('#app').addClass('l-draw-start');
          this.isDraw = true;
          this.drawIng();
        },
        drawStop: function(){
          this.isDraw = false;
          // $('#app').removeClass('l-draw-start');
        },
        drawIng: function(){
          var self = this;
          startId = setInterval(function(){
            if(self.isDraw){
              var random = Math.floor(Math.random() * 200);
              $('#l-name-list .l-active').removeClass('l-active');
              $('#l-name-' + random).addClass('l-active');
            }else{
              clearInterval(startId);
            }
          }, 100);
        }
      }
    });
  });
  </script>
</body>
</html>
